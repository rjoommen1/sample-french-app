<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>French Learning App</title>
  <style>
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      background: #f5f0ff;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
    }
    h1 {
      color: #4a148c;
    }
    canvas {
      border: 3px solid #4a148c;
      background: #fff;
      margin-top: 10px;
    }
    .tabs {
      margin-top: 20px;
      display: flex;
      gap: 10px;
    }
    button {
      padding: 8px 12px;
      border: none;
      border-radius: 6px;
      background: #673ab7;
      color: white;
      cursor: pointer;
    }
    button.active {
      background: #311b92;
    }
    .tab-content {
      display: none;
      margin-top: 20px;
      width: 100%;
      max-width: 600px;
    }
    .tab-content.active {
      display: block;
    }
    .flashcard {
      background: white;
      border: 2px solid #673ab7;
      border-radius: 10px;
      padding: 40px;
      text-align: center;
      font-size: 24px;
      cursor: pointer;
    }
    .quiz-question {
      font-size: 20px;
      margin-bottom: 15px;
    }
    .quiz-options button {
      display: block;
      margin: 5px 0;
      width: 100%;
      text-align: left;
    }
    #feedback {
      margin-top: 10px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1>French Learning App</h1>

  <div class="tabs">
    <button onclick="showTab('game')" class="active">üéÆ Game</button>
    <button onclick="showTab('flashcards')">üÉè Flashcards</button>
    <button onclick="showTab('quiz')">‚ùì Quiz</button>
  </div>

  <!-- Game Section -->
  <div id="game" class="tab-content active">
    <canvas id="gameCanvas" width="400" height="400"></canvas>
    <p id="progress">Score: 0</p>
  </div>

  <!-- Flashcards Section -->
  <div id="flashcards" class="tab-content">
    <div class="flashcard" id="flashcard">Click to flip</div>
    <button onclick="nextFlashcard()">Next</button>
  </div>

  <!-- Quiz Section -->
  <div id="quiz" class="tab-content">
    <div class="quiz-question" id="quiz-question">Loading...</div>
    <div class="quiz-options" id="quiz-options"></div>
    <div id="feedback"></div>
    <button onclick="nextQuiz()">Next Question</button>
  </div>

<script>
// Vocabulary list
const vocab = [
  {fr: "fromage", en: "cheese"},
  {fr: "chat", en: "cat"},
  {fr: "chien", en: "dog"},
  {fr: "maison", en: "house"},
  {fr: "pomme", en: "apple"},
];

// ----------------- TAB HANDLER -----------------
function showTab(tabId) {
  document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
  document.querySelectorAll('.tabs button').forEach(el => el.classList.remove('active'));
  document.getElementById(tabId).classList.add('active');
  event.target.classList.add('active');
}

// ----------------- GAME -----------------
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
let mouse = {x: 200, y: 200};
let cheese = {x: 100, y: 100};
let score = 0;
let currentWord = vocab[0];

function drawGame() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.fillStyle = "gray";
  ctx.fillRect(mouse.x, mouse.y, 20, 20);
  ctx.fillStyle = "yellow";
  ctx.fillRect(cheese.x, cheese.y, 20, 20);
}

function newCheese() {
  cheese.x = Math.floor(Math.random() * 20) * 20;
  cheese.y = Math.floor(Math.random() * 20) * 20;
  currentWord = vocab[Math.floor(Math.random()*vocab.length)];
  speak(currentWord.fr);
}

function speak(word) {
  const utter = new SpeechSynthesisUtterance(word);
  utter.lang = "fr-FR";
  speechSynthesis.speak(utter);
}

document.addEventListener("keydown", (e) => {
  if (e.key === "ArrowUp") mouse.y -= 20;
  if (e.key === "ArrowDown") mouse.y += 20;
  if (e.key === "ArrowLeft") mouse.x -= 20;
  if (e.key === "ArrowRight") mouse.x += 20;

  if (mouse.x === cheese.x && mouse.y === cheese.y) {
    score++;
    document.getElementById("progress").innerText = "Score: " + score;
    newCheese();
  }
  drawGame();
});
newCheese();
drawGame();

// ----------------- FLASHCARDS -----------------
let flashIndex = 0;
let flipped = false;
const flashcard = document.getElementById("flashcard");

flashcard.addEventListener("click", () => {
  if (!flipped) {
    flashcard.innerText = vocab[flashIndex].en;
    flipped = true;
  } else {
    flashcard.innerText = vocab[flashIndex].fr;
    flipped = false;
  }
});

function nextFlashcard() {
  flashIndex = (flashIndex + 1) % vocab.length;
  flashcard.innerText = vocab[flashIndex].fr;
  flipped = false;
}
nextFlashcard();

// ----------------- QUIZ -----------------
let quizIndex = 0;
function loadQuiz() {
  const word = vocab[quizIndex];
  document.getElementById("quiz-question").innerText = "What does '" + word.fr + "' mean?";
  const options = vocab.map(v => v.en);
  shuffle(options);
  document.getElementById("quiz-options").innerHTML = "";
  options.forEach(opt => {
    const btn = document.createElement("button");
    btn.innerText = opt;
    btn.onclick = () => {
      if (opt === word.en) {
        document.getElementById("feedback").innerText = "‚úÖ Correct!";
      } else {
        document.getElementById("feedback").innerText = "‚ùå Incorrect. Correct answer: " + word.en;
      }
    };
    document.getElementById("quiz-options").appendChild(btn);
  });
}
function nextQuiz() {
  quizIndex = (quizIndex + 1) % vocab.length;
  document.getElementById("feedback").innerText = "";
  loadQuiz();
}
function shuffle(arr) {
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
}
loadQuiz();
</script>
</body>
</html>
